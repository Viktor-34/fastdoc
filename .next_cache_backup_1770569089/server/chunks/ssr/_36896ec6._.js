module.exports=[17171,a=>{"use strict";a.s(["Label",()=>g],17171);var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}},96221,a=>{"use strict";a.s(["Loader2",()=>b],96221);let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},91302,a=>{"use strict";a.s(["SiteHeader",()=>d]);var b=a.i(87924),c=a.i(14727);function d({label:a,title:d,description:e,actions:f}){return(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b border-neutral-200 bg-white",children:(0,b.jsxs)("div",{className:"flex w-full items-center justify-between gap-3 px-4 py-3 md:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)("span",{className:"h-6 w-px bg-neutral-200","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[a&&(0,b.jsx)("span",{className:"text-xs text-neutral-500",children:a}),(0,b.jsx)("h1",{className:"text-base font-medium text-neutral-900",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-neutral-500",children:e})]})]}),f?(0,b.jsx)("div",{className:"shrink-0",children:f}):null]})})}},3130,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-white text-neutral-950 flex flex-col gap-6 rounded-xl border border-neutral-200 py-6 shadow-sm dark:bg-neutral-950 dark:text-neutral-50 dark:border-neutral-800",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto]",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-neutral-500 text-sm dark:text-neutral-400",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}},32536,a=>{"use strict";a.s(["default",()=>n]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(96221),f=a.i(40695),g=a.i(3130),h=a.i(5522),i=a.i(17171),j=a.i(7379);let k="#3d3d3a",l="#73726c",m="h-auto w-full rounded-lg border border-[var(--field-border)] bg-white px-4 py-2.5 text-sm text-slate-900 placeholder:text-[var(--field-placeholder)] transition-[color,box-shadow,border-color] focus:border-[var(--field-focus)] focus:outline-none focus:ring-[3px] focus:ring-[var(--field-ring)]";function n({initialData:a,clientId:n,mode:o}){let p=(0,d.useRouter)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({name:a?.name??"",company:a?.company??"",contactPerson:a?.contactPerson??"",middleName:a?.middleName??"",position:a?.position??"",email:a?.email??"",phone:a?.phone??""}),[u,v]=(0,c.useState)({}),w=async a=>{if(a.preventDefault(),(()=>{let a={};return s.name.trim()||(a.name="Имя обязательно"),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Некорректный email"):a.email="Email обязателен",v(a),0===Object.keys(a).length})()){r(!0);try{let a="create"===o?"/api/clients":`/api/clients/${n}`,b=await fetch(a,{method:"create"===o?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,company:s.company||void 0,contactPerson:s.contactPerson||void 0,middleName:s.middleName||void 0,position:s.position||void 0,email:s.email,phone:s.phone||void 0})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to save client")}p.push("/clients"),p.refresh()}catch(a){console.error("Failed to save client:",a),alert(a instanceof Error?a.message:"Не удалось сохранить клиента")}finally{r(!1)}}},x=(a,b)=>{t(c=>({...c,[a]:b})),u[a]&&v(b=>({...b,[a]:void 0}))};return(0,b.jsxs)(g.Card,{className:"w-full rounded-[0.75rem] border-0 bg-white px-0 py-0 shadow-none",style:{boxShadow:"0 1px 1px 0 rgba(0, 0, 0, 0.06), 0 0 1px 0 rgba(0, 0, 0, 0.3)"},children:[(0,b.jsx)(g.CardContent,{className:"space-y-6 px-4 py-6 md:px-6",children:(0,b.jsxs)("form",{id:"client-form",onSubmit:w,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 text-sm font-medium",style:{color:k},children:"Основная информация"}),(0,b.jsx)("p",{className:"text-xs",style:{color:l},children:"Заполните данные клиента для быстрого выбора в коммерческих предложениях."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"name",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Имя клиента *"}),(0,b.jsx)(h.Input,{id:"name",value:s.name,onChange:a=>x("name",a.target.value),placeholder:"Иван Иванов или ООО «Компания»",disabled:q,className:m}),u.name&&(0,b.jsx)("p",{className:"mt-2 text-sm text-rose-600",children:u.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"company",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Название компании"}),(0,b.jsx)(h.Input,{id:"company",value:s.company,onChange:a=>x("company",a.target.value),placeholder:"ООО «Название»",disabled:q,className:m})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"contactPerson",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Контактное лицо"}),(0,b.jsx)(h.Input,{id:"contactPerson",value:s.contactPerson,onChange:a=>x("contactPerson",a.target.value),placeholder:"Иван",disabled:q,className:m})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"middleName",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Отчество"}),(0,b.jsx)(h.Input,{id:"middleName",value:s.middleName,onChange:a=>x("middleName",a.target.value),placeholder:"Иванович",disabled:q,className:m})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"position",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Должность"}),(0,b.jsx)(h.Input,{id:"position",value:s.position,onChange:a=>x("position",a.target.value),placeholder:"Директор",disabled:q,className:m})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"email",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Email *"}),(0,b.jsx)(h.Input,{id:"email",type:"email",value:s.email,onChange:a=>x("email",a.target.value),placeholder:"email@example.com",disabled:q,className:m}),u.email&&(0,b.jsx)("p",{className:"mt-2 text-sm text-rose-600",children:u.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"phone",className:"mb-2 block text-sm font-medium",style:{color:k},children:"Телефон"}),(0,b.jsx)(h.Input,{id:"phone",type:"tel",value:s.phone,onChange:a=>x("phone",a.target.value),placeholder:"+7 (999) 123-45-67",disabled:q,className:m}),(0,b.jsx)("p",{className:"mt-1.5 text-xs",style:{color:l},children:"Необязательное поле. Используется для быстрого контакта с клиентом."})]})]})}),(0,b.jsx)(j.Separator,{style:{backgroundColor:"var(--field-border)"}}),(0,b.jsxs)(g.CardFooter,{className:"flex flex-col gap-3 py-6 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)("p",{className:"text-sm",style:{color:l},children:"Убедитесь, что все данные актуальны. После сохранения клиент будет доступен в списке."}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(f.Button,{type:"submit",form:"client-form",disabled:q,children:[q?(0,b.jsx)(e.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"create"===o?"Создать":"Сохранить"]})})]})]})}}];

//# sourceMappingURL=_36896ec6._.js.map