module.exports=[96221,a=>{"use strict";a.s(["Loader2",()=>b],96221);let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},91302,a=>{"use strict";a.s(["SiteHeader",()=>d]);var b=a.i(87924),c=a.i(14727);function d({label:a,title:d,description:e,actions:f}){return(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b border-neutral-200 bg-white",children:(0,b.jsxs)("div",{className:"flex w-full items-center justify-between gap-3 px-4 py-3 md:px-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)("span",{className:"h-6 w-px bg-neutral-200","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[a&&(0,b.jsx)("span",{className:"text-xs text-neutral-500",children:a}),(0,b.jsx)("h1",{className:"text-base font-medium text-neutral-900",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-neutral-500",children:e})]})]}),f?(0,b.jsx)("div",{className:"shrink-0",children:f}):null]})})}},81560,a=>{"use strict";a.s(["Trash2",()=>b],81560);let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},13749,50522,a=>{"use strict";a.s(["ChevronLeft",()=>b],13749);let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronRight",()=>c.default],50522);var c=a.i(11989)},11989,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},99464,a=>{"use strict";a.s(["Pencil",()=>b],99464);let b=(0,a.i(70106).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},96938,a=>{"use strict";a.s(["default",()=>o]);var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(13749),f=a.i(50522),g=a.i(99464),h=a.i(81560),i=a.i(96221),j=a.i(40695),k=a.i(5522);let l="hsl(30deg 3.3% 11.8% / 15%)",m="#3d3d3a",n="#73726c";function o({initialClients:a}){let[o,p]=(0,d.useState)(""),[q,r]=(0,d.useState)(a),[s,t]=(0,d.useState)(1),[u,v]=(0,d.useState)(10),[w,x]=(0,d.useState)(null),y=(0,d.useMemo)(()=>{let a=o.trim().toLowerCase();return a?q.filter(b=>[b.name,b.company??"",b.email,b.contactPerson??""].some(b=>b.toLowerCase().includes(a))):q},[q,o]),z=Math.ceil(y.length/u),A=(s-1)*u,B=A+u,C=y.slice(A,B);(0,d.useMemo)(()=>{t(1)},[o]);let D=async a=>{if(confirm("Вы уверены, что хотите удалить этого клиента?")){x(a);try{let b=await fetch(`/api/clients/${a}`,{method:"DELETE"});if(!b.ok)throw Error(await b.text());r(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Failed to delete client",a),alert("Не удалось удалить клиента")}finally{x(null)}}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)(k.Input,{type:"search",value:o,onChange:a=>p(a.target.value),placeholder:"Поиск по имени, компании или email",className:"w-full max-w-sm"}),(0,b.jsx)(j.Button,{asChild:!0,className:"h-9 rounded-xl bg-[#C6613F] px-4 text-sm font-medium text-[#FAFAFA] shadow-[0px_1px_2px_0px_rgba(10,10,10,0.06)] hover:bg-[#A04F33]",children:(0,b.jsx)(c.default,{href:"/clients/new",children:"Новый клиент"})})]}),(0,b.jsxs)("div",{className:"overflow-hidden rounded-lg border",style:{borderColor:l},children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("div",{className:"min-w-[920px]",children:[(0,b.jsxs)("div",{className:"flex h-10 items-center gap-8 border-b",style:{borderColor:l,backgroundColor:"rgb(243, 242, 240)"},children:[(0,b.jsx)("div",{className:"min-w-[220px] flex-1 px-[10px] pl-[26px]",children:(0,b.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:m},children:"Имя"})}),(0,b.jsx)("div",{className:"w-[180px] shrink-0 px-2",children:(0,b.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:m},children:"Компания"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-2",children:(0,b.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:m},children:"Email"})}),(0,b.jsx)("div",{className:"w-[180px] shrink-0 px-2",children:(0,b.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:m},children:"Контакт"})}),(0,b.jsx)("div",{className:"w-[120px] shrink-0 px-2 pr-[26px]"})]}),(0,b.jsx)("div",{className:"bg-white",children:C.map(a=>{let d=w===a.id;return(0,b.jsxs)("div",{className:"flex items-center gap-8 border-b transition-colors hover:bg-neutral-50",style:{borderColor:l},children:[(0,b.jsx)("div",{className:"min-w-[220px] flex-1 px-[10px] py-2 pl-[26px]",children:(0,b.jsx)(c.default,{href:`/clients/${a.id}`,className:"truncate block text-[14px] font-medium tracking-tight transition-colors hover:text-neutral-700",style:{color:m},title:a.name,children:a.name})}),(0,b.jsx)("div",{className:"w-[180px] shrink-0 px-2 py-2",children:(0,b.jsx)("span",{className:"truncate block text-sm font-medium",style:{color:m},title:a.company||"",children:a.company||"—"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-2 py-2",children:(0,b.jsx)("span",{className:"truncate block text-sm",style:{color:n},title:a.email,children:a.email})}),(0,b.jsx)("div",{className:"w-[180px] shrink-0 px-2 py-2",children:(0,b.jsx)("span",{className:"truncate block text-sm",style:{color:n},title:a.contactPerson||"",children:a.contactPerson||"—"})}),(0,b.jsxs)("div",{className:"flex w-[120px] shrink-0 items-center gap-2 px-2 pr-[26px]",children:[(0,b.jsx)(c.default,{href:`/clients/${a.id}`,className:"flex size-8 items-center justify-center rounded-md transition-colors hover:bg-neutral-100 hover:text-neutral-900",style:{color:n},"aria-label":"Редактировать",children:(0,b.jsx)(g.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)("button",{type:"button",disabled:d,onClick:()=>D(a.id),className:"flex size-8 items-center justify-center rounded-md transition-colors hover:bg-neutral-100 hover:text-red-500 disabled:opacity-50",style:{color:n},title:"Удалить",children:d?(0,b.jsx)(i.Loader2,{className:"size-4 animate-spin"}):(0,b.jsx)(h.Trash2,{className:"size-4"})})]})]},a.id)})})]})}),0===y.length&&(0,b.jsx)("div",{className:"bg-white px-6 py-10 text-center text-sm text-neutral-500",children:"Ничего не найдено. Попробуйте изменить запрос."})]}),z>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("select",{value:u,onChange:a=>{v(Number(a.target.value)),t(1)},className:"h-9 rounded-lg border border-[var(--field-border)] bg-white px-[13px] py-[9px] text-xs shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-[color,box-shadow,border-color] focus:border-[var(--field-focus)] focus:outline-none focus:ring-[3px] focus:ring-[var(--field-ring)]",style:{color:m},children:[(0,b.jsx)("option",{value:10,children:"10"}),(0,b.jsx)("option",{value:25,children:"25"}),(0,b.jsx)("option",{value:50,children:"50"}),(0,b.jsx)("option",{value:100,children:"100"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"mr-8 text-sm",style:{color:n},children:[A+1,"-",Math.min(B,y.length)," из ",y.length]}),(0,b.jsx)("button",{onClick:()=>t(a=>Math.max(1,a-1)),disabled:1===s,className:"flex size-8 items-center justify-center rounded-lg border bg-white shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-colors hover:bg-neutral-50 disabled:cursor-not-allowed disabled:opacity-50",style:{borderColor:l,color:n},title:"Предыдущая страница",children:(0,b.jsx)(e.ChevronLeft,{className:"size-4"})}),Array.from({length:Math.min(6,z)},(a,c)=>{let d;return d=z<=6||s<=3?c+1:s>=z-2?z-5+c:s-2+c,(0,b.jsx)("button",{onClick:()=>t(d),className:`flex size-8 items-center justify-center rounded-lg text-sm transition-colors ${s===d?"bg-[#C6613F] text-white":"text-neutral-600 hover:bg-neutral-100"}`,children:d},d)}),(0,b.jsx)("button",{onClick:()=>t(a=>Math.min(z,a+1)),disabled:s===z,className:"flex size-8 items-center justify-center rounded-lg border bg-white shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-colors hover:bg-neutral-50 disabled:cursor-not-allowed disabled:opacity-50",style:{borderColor:l,color:n},title:"Следующая страница",children:(0,b.jsx)(f.ChevronRight,{className:"size-4"})})]})]})]})}}];

//# sourceMappingURL=_3187fa4b._.js.map