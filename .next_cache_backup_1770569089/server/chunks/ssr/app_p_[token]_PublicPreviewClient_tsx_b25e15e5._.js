module.exports=[43969,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(87924),c=a.i(72131);function d({token:a,proposalHtml:d}){let[e,f]=(0,c.useState)("100vh");return(0,c.useEffect)(()=>{let a=a=>{if(a.data?.type!=="resize")return;let b=a.data.height;if("number"!=typeof b||!Number.isFinite(b))return;let c=Math.max(320,Math.round(b+40));f(`${c}px`)};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[]),(0,c.useEffect)(()=>{let b=localStorage.getItem("uid");b||(b=Math.random().toString(36).slice(2),localStorage.setItem("uid",b));let c=(c,d={})=>{fetch("/api/track",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:a,event:c,uid:b,meta:d,ref:document.referrer})}).catch(()=>{})};c("opened");let d=null,e=()=>{null===d&&(d=window.setInterval(()=>c("time",{seconds:15}),15e3))},f=()=>{null!==d&&(window.clearInterval(d),d=null)},g=()=>{"visible"===document.visibilityState?e():f()};return document.addEventListener("visibilitychange",g),"visible"===document.visibilityState&&e(),()=>{f(),document.removeEventListener("visibilitychange",g)}},[a]),(0,b.jsxs)("div",{className:"public-preview",children:[(0,b.jsx)("div",{style:{width:"min(900px, 100%)",margin:"0 auto",background:"#ffffff",borderRadius:"20px",boxShadow:"0 24px 48px -32px rgba(15,23,42,0.25)",overflow:"hidden"},children:(0,b.jsx)("iframe",{srcDoc:d,style:{width:"100%",height:e,border:"none",display:"block"},title:"Коммерческое предложение"})}),(0,b.jsx)("div",{style:{textAlign:"center",margin:"32px 0"},children:(0,b.jsx)("button",{type:"button",id:"downloadPdf",className:"download-button",onClick:()=>{fetch("/api/track",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:a,event:"download",uid:localStorage.getItem("uid")||void 0,ref:document.referrer})}).catch(()=>{}),window.open(`/p/${a}/pdf`,"_blank","noopener,noreferrer")},children:"Скачать PDF"})})]})}}];

//# sourceMappingURL=app_p_%5Btoken%5D_PublicPreviewClient_tsx_b25e15e5._.js.map