(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";e.s(["Loader2",()=>t],31278);let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},48303,e=>{"use strict";e.s(["SiteHeader",()=>l]);var t=e.i(43476),s=e.i(11522);function l(e){let{label:l,title:a,description:r,actions:i}=e;return(0,t.jsx)("header",{className:"sticky top-0 z-20 border-b border-neutral-200 bg-white",children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-3 px-4 py-3 md:px-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)("span",{className:"h-6 w-px bg-neutral-200","aria-hidden":"true"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[l&&(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:l}),(0,t.jsx)("h1",{className:"text-base font-medium text-neutral-900",children:a}),r&&(0,t.jsx)("p",{className:"text-xs text-neutral-500",children:r})]})]}),i?(0,t.jsx)("div",{className:"shrink-0",children:i}):null]})})}},27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},73375,63059,e=>{"use strict";e.s(["ChevronLeft",()=>t],73375);let t=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronRight",()=>s.default],63059);var s=e.i(46349)},46349,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},88699,e=>{"use strict";e.s(["Pencil",()=>t],88699);let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},38781,e=>{"use strict";e.s(["default",()=>p]);var t=e.i(43476),s=e.i(22016),l=e.i(71645),a=e.i(73375),r=e.i(63059),i=e.i(88699),n=e.i(27612),c=e.i(31278),o=e.i(67881),d=e.i(23750);let x="hsl(30deg 3.3% 11.8% / 15%)",h="#3d3d3a",m="#73726c";function p(e){let{initialClients:p}=e,[u,f]=(0,l.useState)(""),[b,j]=(0,l.useState)(p),[g,v]=(0,l.useState)(1),[y,N]=(0,l.useState)(10),[w,k]=(0,l.useState)(null),C=(0,l.useMemo)(()=>{let e=u.trim().toLowerCase();return e?b.filter(t=>{var s,l;return[t.name,null!=(s=t.company)?s:"",t.email,null!=(l=t.contactPerson)?l:""].some(t=>t.toLowerCase().includes(e))}):b},[b,u]),_=Math.ceil(C.length/y),M=(g-1)*y,z=M+y,L=C.slice(M,z);(0,l.useMemo)(()=>{v(1)},[u]);let S=async e=>{if(confirm("Вы уверены, что хотите удалить этого клиента?")){k(e);try{let t=await fetch("/api/clients/".concat(e),{method:"DELETE"});if(!t.ok)throw Error(await t.text());j(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete client",e),alert("Не удалось удалить клиента")}finally{k(null)}}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsx)(d.Input,{type:"search",value:u,onChange:e=>f(e.target.value),placeholder:"Поиск по имени, компании или email",className:"w-full max-w-sm"}),(0,t.jsx)(o.Button,{asChild:!0,className:"h-9 rounded-xl bg-[#C6613F] px-4 text-sm font-medium text-[#FAFAFA] shadow-[0px_1px_2px_0px_rgba(10,10,10,0.06)] hover:bg-[#A04F33]",children:(0,t.jsx)(s.default,{href:"/clients/new",children:"Новый клиент"})})]}),(0,t.jsxs)("div",{className:"overflow-hidden rounded-lg border",style:{borderColor:x},children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("div",{className:"min-w-[920px]",children:[(0,t.jsxs)("div",{className:"flex h-10 items-center gap-8 border-b",style:{borderColor:x,backgroundColor:"rgb(243, 242, 240)"},children:[(0,t.jsx)("div",{className:"min-w-[220px] flex-1 px-[10px] pl-[26px]",children:(0,t.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:h},children:"Имя"})}),(0,t.jsx)("div",{className:"w-[180px] shrink-0 px-2",children:(0,t.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:h},children:"Компания"})}),(0,t.jsx)("div",{className:"w-[200px] shrink-0 px-2",children:(0,t.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:h},children:"Email"})}),(0,t.jsx)("div",{className:"w-[180px] shrink-0 px-2",children:(0,t.jsx)("span",{className:"text-[12px] font-medium tracking-tight",style:{color:h},children:"Контакт"})}),(0,t.jsx)("div",{className:"w-[120px] shrink-0 px-2 pr-[26px]"})]}),(0,t.jsx)("div",{className:"bg-white",children:L.map(e=>{let l=w===e.id;return(0,t.jsxs)("div",{className:"flex items-center gap-8 border-b transition-colors hover:bg-neutral-50",style:{borderColor:x},children:[(0,t.jsx)("div",{className:"min-w-[220px] flex-1 px-[10px] py-2 pl-[26px]",children:(0,t.jsx)(s.default,{href:"/clients/".concat(e.id),className:"truncate block text-[14px] font-medium tracking-tight transition-colors hover:text-neutral-700",style:{color:h},title:e.name,children:e.name})}),(0,t.jsx)("div",{className:"w-[180px] shrink-0 px-2 py-2",children:(0,t.jsx)("span",{className:"truncate block text-sm font-medium",style:{color:h},title:e.company||"",children:e.company||"—"})}),(0,t.jsx)("div",{className:"w-[200px] shrink-0 px-2 py-2",children:(0,t.jsx)("span",{className:"truncate block text-sm",style:{color:m},title:e.email,children:e.email})}),(0,t.jsx)("div",{className:"w-[180px] shrink-0 px-2 py-2",children:(0,t.jsx)("span",{className:"truncate block text-sm",style:{color:m},title:e.contactPerson||"",children:e.contactPerson||"—"})}),(0,t.jsxs)("div",{className:"flex w-[120px] shrink-0 items-center gap-2 px-2 pr-[26px]",children:[(0,t.jsx)(s.default,{href:"/clients/".concat(e.id),className:"flex size-8 items-center justify-center rounded-md transition-colors hover:bg-neutral-100 hover:text-neutral-900",style:{color:m},"aria-label":"Редактировать",children:(0,t.jsx)(i.Pencil,{className:"h-4 w-4"})}),(0,t.jsx)("button",{type:"button",disabled:l,onClick:()=>S(e.id),className:"flex size-8 items-center justify-center rounded-md transition-colors hover:bg-neutral-100 hover:text-red-500 disabled:opacity-50",style:{color:m},title:"Удалить",children:l?(0,t.jsx)(c.Loader2,{className:"size-4 animate-spin"}):(0,t.jsx)(n.Trash2,{className:"size-4"})})]})]},e.id)})})]})}),0===C.length&&(0,t.jsx)("div",{className:"bg-white px-6 py-10 text-center text-sm text-neutral-500",children:"Ничего не найдено. Попробуйте изменить запрос."})]}),_>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("select",{value:y,onChange:e=>{N(Number(e.target.value)),v(1)},className:"h-9 rounded-lg border border-[var(--field-border)] bg-white px-[13px] py-[9px] text-xs shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-[color,box-shadow,border-color] focus:border-[var(--field-focus)] focus:outline-none focus:ring-[3px] focus:ring-[var(--field-ring)]",style:{color:h},children:[(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:25,children:"25"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"mr-8 text-sm",style:{color:m},children:[M+1,"-",Math.min(z,C.length)," из ",C.length]}),(0,t.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===g,className:"flex size-8 items-center justify-center rounded-lg border bg-white shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-colors hover:bg-neutral-50 disabled:cursor-not-allowed disabled:opacity-50",style:{borderColor:x,color:m},title:"Предыдущая страница",children:(0,t.jsx)(a.ChevronLeft,{className:"size-4"})}),Array.from({length:Math.min(6,_)},(e,s)=>{let l;return l=_<=6||g<=3?s+1:g>=_-2?_-5+s:g-2+s,(0,t.jsx)("button",{onClick:()=>v(l),className:"flex size-8 items-center justify-center rounded-lg text-sm transition-colors ".concat(g===l?"bg-[#C6613F] text-white":"text-neutral-600 hover:bg-neutral-100"),children:l},l)}),(0,t.jsx)("button",{onClick:()=>v(e=>Math.min(_,e+1)),disabled:g===_,className:"flex size-8 items-center justify-center rounded-lg border bg-white shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-colors hover:bg-neutral-50 disabled:cursor-not-allowed disabled:opacity-50",style:{borderColor:x,color:m},title:"Следующая страница",children:(0,t.jsx)(r.ChevronRight,{className:"size-4"})})]})]})]})}}]);